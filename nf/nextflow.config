singularity.autoMounts = true

manifest {
	name = 'NZ FOG'
	author = 'Guillermo A.R. Piccoli'
	homePage = 'https://www.epicsolutions.cl'
	description = 'Pipeline for NZ Flat Oyster Genetic Analises'
	version = '1.0.0'
}

executor{
    jobName = { "$task.tag" }
}

params {
    projectName = "fog"
	wdir = "/nfs/scratch/rodriggu"
    isoseq = "${params.wdir}/isoseq"
    outdir = "${params.wdir}/output"
}

process {

}

profiles {
    standard {
		process.executor = 'slurm'
		process.queue = 'parallel'
        process {
			withLabel: fastqc {
        		container = 'shub://kiwiepic/FOG:fastqc-0.11.5'
				memory = 48.GB
				cpus = 12
				time = '6h'
			}
			withLabel: multiqc {
				container = 'docker://quay.io/biocontainers/multiqc:1.9--py_1'
				memory = 48.GB
			}
			withLabel: bam2fastx {
				container = 'docker://quay.io/biocontainers/bam2fastx:1.3.0--he1c1bb9_8'
			}
			withLabel: isoseq3 {
				container = 'docker://quay.io/biocontainers/isoseq3:3.4.0--0'
			}
			withLabel: purge_haplotigs {
				container = 'docker://quay.io/biocontainers/purge_haplotigs:1.1.1--0'
			}
			withLabel: tetools {
				container = 'docker://dfam/tetools:1.2'
			}
			withLabel: canu {
				container = 'shub://kiwiepic/FOG:canu-2.1.1'
			}
			withLabel: hifiasm {
				container = 'shub://kiwiepic/FOG:hifiasm-0.13'
			}
			withLabel: isoseq3 {
				container = 'shub://kiwiepic/FOG:isoseq3-3.4.0'
			}
			withLabel: minimap2 {
				container = 'shub://kiwiepic/FOG:minimap2-2.17'
			}
		}
        singularity.enabled = true
		singularity.cacheDir = "${params.wdir}/work/singularity"
    }
}
